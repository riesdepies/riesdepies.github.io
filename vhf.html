<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Valkhof Festival 2025</title>
<link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 183.57 183.57'%3E %3Ccircle cx='91.785' cy='91.785' r='91.785' fill='%23cccccc'/%3E %3Cg%3E %3CanimateTransform attributeName='transform' type='rotate' from='0 91.785 91.785' to='360 91.785 91.785' dur='20s' repeatCount='indefinite'/%3E %3C!-- Deze groep schaalt de inhoud naar 75%25 en centreert het --%3E %3Cg transform='translate(49.63 22.946) scale(0.75)'%3E %3Cpath d='M108.8,110.688C105.213,101.053,96.864,95.578,90,88.321c-4.033-3.574-6.292-12.874,1.639-11.685A20.888,20.888,0,0,0,103.4,73.843c5.389-2.751,9.114-8.309,8.615-14.412-.486-10.01-1.075-20.046-1.325-30.1.007-8.512,3.283-22.539-5.486-27.327C95.353-1.656,77.637-1.107,73.58,10.488c-1.121,2.678-1.149,7.1-1.332,9.975C71.9,25.827,70.67,32.97,71.2,38.292a71.336,71.336,0,0,1,.345,11.66c-2.107,8.747-2.179,21.282-10.495,25.79-4.39,2.541-8.939-.535-11.858-3.763C38.829,61.523,41.34,47.44,41.481,34.048c-.935-9.821-.563-22.691-8.531-29.624C20.594-2.774,2.212,1.759.441,17.785c-1.339,8.288.8,16.256.764,24.43C1.382,48.9.428,55.675.729,62.387a33.405,33.405,0,0,0,13.735,25.97c5.3,3.812,14.125,9.972,10.472,17.542a2.735,2.735,0,0,1-2.673,1.188c-8.242-.268-16.854,4.785-19.416,12.788-1.41,5.975-.4,11.535-.663,17.744,1.7,13.593-7.3,32.231,4.366,42.764,4.615,2.346,10.127.9,15,.568,34.144,1.983,10.9-40.864,22.178-58.377,3.64-4.847,6.148-9.354,11.483-12.369,1.8-1.04,3.432-2.822,5.659-2.079,12.326,4.636,11.158,20.592,10.508,31.389-.86,16.967-5.224,49.528,21.752,43.265,3.717-.242,7.533-.7,10.511-2.94,14.575-11.272,6-31.043,8.457-46.518.119-7.668-.327-15.458-3.293-22.635m-4.458,60.358c-9.286,7.154-23.38,6.2-24.661-7.566-.087-14.111-.1-28.407-2.788-42.366-2.2-10.083-11.858-24.873-23.139-18.716C48.162,105.731,43,115.276,38.729,119.723a20.352,20.352,0,0,0-3.345,8.022c-2.05,12.7,3.861,25.376-.921,37.851-1.457,4.234-4.616,8.449-9.091,9.658-4.993,1.271-10.991,1.953-15.572-.7a6.363,6.363,0,0,1-1.99-4.008c-1.992-9.033.271-17.181.87-26.169.266-5.245-.348-11.268-.167-16.431-1.184-19.046,18.08-9.94,26.667-18.929,5.407-6.926-1.258-15.1-7.282-18.869C11.627,83.277,1.071,69.16,7.941,51.259a82.764,82.764,0,0,0,.552-24.643c-.5-3.469-.716-7.948.193-11.388a22.958,22.958,0,0,1,1.7-4.243,6.267,6.267,0,0,1,1.291-1.937,5.151,5.151,0,0,1,3.3-1.1c2.135-.088,5.573-.483,7.519.641C43.7,20.842,26.924,52.5,40.722,69.421,57.7,96.5,78.189,72.668,78.56,50.261c1.467-11.189-3.79-23.1-.922-33.979,2.516-8.617,12.7-11.927,20.945-10.459,15.171,4.31,4.738,24.625,6.1,35.611-.467,10.144,1.482,24.84-10.712,28.7-3.724,1.2-8.091.164-11.514,2.4C76,77.266,78.878,86.438,83.518,91.3c9.354,11.344,20.159,17.059,20.544,33.431.388,11.8-.954,23.364,2.242,35.067.983,3.769.588,8.185-1.959,11.248' fill='%23000000'/%3E %3C/g%3E %3C/g%3E %3C/svg%3E" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
html {
overflow-y: scroll;
}
*, *:before, *:after {
box-sizing: border-box;
}

body {
font-family: Arial, sans-serif;
margin: 0;
padding-left: 10px;
padding-right: 10px;
padding-bottom: 10px;
background: #f0f0f0;
}
body.modal-open {
overflow: hidden;
}

.control-bar-group {
position: fixed;
top: 0;
left: 0;
right: 0;
z-index: 1000;
background: #f0f0f0;
padding: 10px;
box-shadow: 0 2px 5px rgba(0,0,0,0.2);
transition: transform 0.3s ease-out;
will-change: transform;
}

.control-bar-group.hidden {
transform: translateY(-100%);
}

.day-filter-container,
.filter-container {
margin-bottom: 5px;
}

.day-filter-container {
display: grid;
grid-template-columns: repeat(7, 1fr);
gap: 5px;
}
.day-filter-button {
padding: 10px;
font-size: 14px;
text-align: center;
background: #ddd;
border: none;
cursor: pointer;
border-radius: 4px;
position: relative;
overflow: hidden;
transition: all 0.2s ease-in-out;
}
.day-filter-button.active {
background: #007bff;
color: #fff;
}

.filter-container {
display: flex;
gap: 5px;
align-items: center;
}

.filter-button {
padding: 10px 12px;
font-size: 14px;
text-align: center;
background: #fff;
border: 1px solid #ddd;
border-radius: 20px;
cursor: pointer;
white-space: nowrap;
flex-shrink: 0; /* Zorgt dat knoppen niet krimpen */
}

.filter-button.active {
background: #007bff;
color: #fff;
}

#favoriteToggleBtn {
display: inline-flex;
align-items: center;
gap: 8px;
}
#favoriteToggleBtn i {
color: red;
font-size: 16px;
transition: color 0.2s ease-in-out;
}

#searchField {
padding: 10px 12px 10px 35px; /* Links padding voor icoon */
font-size: 14px;
background: #fff;
border: 1px solid #ddd;
border-radius: 20px;
width: 100%;
}

.search-wrapper {
position: relative;
flex-grow: 1;
min-width: 0;
}
.search-input-icon {
position: absolute;
left: 12px;
top: 50%;
transform: translateY(-50%);
color: #888;
pointer-events: none;
transition: color 0.2s ease;
}
#searchField:focus + .search-input-icon {
color: #007bff;
}
#searchField.has-content + .search-input-icon {
color: #fff;
}


/* === CSS VOOR PODIA DROPDOWN (AANGEPAST) === */
.podia-master-container {
position: relative;
}

#podiaToggleBtn {
position: relative;
z-index: 10;
display: flex;
align-items: center;
justify-content: center; /* Zorgt voor centreren van label en indicator */
gap: 8px;
}
#podiaToggleBtn.menu-open .podia-indicator i {
transform: rotate(180deg);
}

.podia-indicator {
display: inline-flex; /* Aangepast voor betere uitlijning */
align-items: center;
justify-content: center;
font-weight: bold;
font-size: 0.9em;
min-width: 1em; /* Zorgt voor ruimte zelfs als leeg */
text-align: center;
}
.podia-indicator i {
transition: transform 0.2s ease;
}

.podia-buttons-container {
position: absolute;
top: 100%;
left: 0;
margin-top: 5px;
background: transparent;
border: none;
padding: 0;
box-shadow: none;
z-index: 9;
display: flex;
flex-direction: column;
gap: 5px;
opacity: 0;
transform: translateY(-10px);
transition: opacity 0.2s ease, transform 0.2s ease;
pointer-events: none;
}
.podia-buttons-container.visible {
opacity: 1;
transform: translateY(0);
pointer-events: auto;
}
.podia-buttons-container .filter-button {
box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}
/* ================================== */


#searchField::-webkit-search-decoration,
#searchField::-webkit-search-cancel-button,
#searchField::-webkit-search-results-button,
#searchField::-webkit-search-results-decoration {
-webkit-appearance:none;
display: none;
}
#searchField::-ms-clear {
display: none;
width: 0;
height: 0;
}
#searchField:focus {
outline: none;
border-color: #007bff;
}
#searchField.has-content {
background: #007bff;
color: #fff;
}
.info-container {
background: #fff;
border-radius: 4px;
padding: 0 15px;
display: flex;
align-items: center;
box-shadow: 0 1px 3px rgba(0,0,0,0.1);
height: 40px;
margin-bottom: 0;
}

#statusContainer {
height: 20px;
line-height: 20px;
overflow: hidden;
position: relative;
flex-grow: 1;
min-width: 0;
margin-right: 10px;
}
#statusSlider {
position: absolute;
top: 0;
left: 0;
width: 100%;
transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55);
}
#countText, #countdownText, #countTextClone {
display: block;
font-weight: bold;
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
height: 20px;
}

.icons-group {
margin-left: auto;
display: flex;
gap: 15px;
align-items: center;
}

.sort-icon, #settingsBtn {
cursor: pointer;
color: #555;
user-select: none;
font-size: 20px;
}
.sort-icon.active {
color: #007bff;
}
#errorMessage {
display: none;
color: #a00;
background: #fdd;
padding: 10px;
border: 1px solid #a00;
border-radius: 5px;
margin-bottom: 10px;
}
#artistList {
display: flex;
flex-direction: column;
gap: 10px;
}
.artist-card {
background: #fff;
border-radius: 8px;
box-shadow: 0 2px 4px rgba(0,0,0,0.1);
padding: 15px;
position: relative;
}
.artist-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 10px;
}
.artist-card h2 {
margin: 0;
font-size: 20px;
display: inline;
vertical-align: middle;
}
.favorite-icon {
width: 32px;
height: 32px;
display: flex;
align-items: center;
justify-content: center;
cursor: pointer;
color: red;
font-size: 22px;
margin-left: 10px;
flex-shrink: 0;
}

.artist-photo {
width: 100%;
aspect-ratio: 1 / 1;
object-fit: cover;
border-radius: 6px;
margin-bottom: 15px;
background-color: #e0e0e0;
}
a .artist-photo {
cursor: pointer;
}

.artist-meta-container {
display: flex;
justify-content: space-between;
align-items: flex-start;
gap: 15px;
}

.artist-info,
.artist-description {
font-size: 14px;
line-height: 1.4;
}
.artist-info p,
.artist-description p {
margin: 6px 0;
}
.artist-info {
margin: 0;
flex-grow: 1;
}
.artist-description {
margin-top: 15px;
}

.artist-name {
color: #007bff;
text-decoration: none;
}

.artist-info p:first-child {
margin-top: 0;
}

/* --- STYLING VOOR NU BEZIG INDICATOR --- */
.now-playing-indicator {
display: none; /* Standaard verborgen */
margin-left: 8px;
vertical-align: middle;
}
.vu-meter-icon {
width: 18px;
height: 18px;
fill: currentColor; /* Erft kleur van de h2 */
transform: translateY(-2px); /* Iets hoger gezet voor betere uitlijning */
}
@keyframes vu-pulse {
0%, 100% { transform: scaleY(0.2); }
25% { transform: scaleY(1); }
50% { transform: scaleY(0.4); }
75% { transform: scaleY(0.8); }
}
.vu-meter-icon .bar {
transform-origin: bottom;
animation: vu-pulse 1.2s ease-in-out infinite;
}
.vu-meter-icon .bar:nth-child(2) { animation-delay: -0.3s; }
.vu-meter-icon .bar:nth-child(3) { animation-delay: -0.6s; }
.vu-meter-icon .bar:nth-child(4) { animation-delay: -0.9s; }
/* ------------------------------------------- */

mark {
background-color: yellow;
color: black;
padding: 0.1em;
border-radius: 3px;
}

.youtube-links-container {
margin-top: 15px;
padding-top: 10px;
border-top: 1px solid #eee;
display: flex;
flex-direction: column;
gap: 10px;
}

.youtube-link-item {
display: flex;
align-items: flex-start;
gap: 10px;
text-decoration: none;
background-color: #f9f9f9;
padding: 8px;
border-radius: 6px;
transition: background-color 0.2s;
}
.youtube-link-item:hover {
background-color: #efefef;
}

.youtube-thumbnail {
width: 120px;
height: 67px;
object-fit: cover;
border-radius: 4px;
flex-shrink: 0;
}

.youtube-title {
font-size: 13px;
line-height: 1.4;
color: #333;
margin: 0;
overflow: hidden;
text-overflow: ellipsis;
display: -webkit-box;
-webkit-line-clamp: 3;
-webkit-box-orient: vertical;
}

.action-buttons-wrapper {
display: flex;
flex-direction: row;
align-items: flex-start;
gap: 6px;
flex-shrink: 0;
}
.stacked-buttons-column {
display: flex;
flex-direction: column;
gap: 6px;
}

.spotify-open-button {
display: inline-flex;
align-items: center;
justify-content: center;
width: 30px;
height: 30px;
background-color: #54c07b;
color: white !important;
border: none;
border-radius: 50%;
cursor: pointer;
text-decoration: none;
transition: background-color 0.2s;
flex-shrink: 0;
}
.spotify-open-button:hover {
background-color: #67c989;
}
.spotify-open-button i {
font-size: 14px;
}

.spotify-play-button {
background-color: #54c07b;
color: white !important;
border: none;
padding: 6px 12px 6px 10px;
border-radius: 50px;
cursor: pointer;
font-size: 13px;
font-weight: bold;
display: inline-flex;
align-items: center;
text-decoration: none;
transition: background-color 0.2s;
flex-shrink: 0;
white-space: nowrap;
}
.spotify-play-button:hover {
background-color: #67c989;
}
.spotify-play-button i {
margin-right: 8px;
font-size: 18px;
}

.search-button {
color: white !important;
border: none;
padding: 6px 12px 6px 10px;
border-radius: 50px;
cursor: pointer;
font-size: 13px;
font-weight: bold;
display: flex;
align-items: center;
text-decoration: none;
transition: background-color 0.2s;
}
.search-button i {
margin-right: 8px;
font-size: 16px;
}

.google-search-button {
background-color: #007bff;
}
.google-search-button:hover {
background-color: #0069d9;
}

.youtube-search-button {
background-color: #e06c75;
}
.youtube-search-button:hover {
background-color: #e57e88;
}


.docked-spotify-player-wrapper {
position: fixed;
bottom: 0;
left: 0;
right: 0;
height: 80px;
z-index: 2000;
display: flex;
align-items: center;
background-color: #282828;
box-shadow: 0 -2px 10px rgba(0,0,0,0.5);
transition: transform 0.3s ease-in-out;
will-change: transform;
transform: translateY(100%) translateZ(0);
}

.docked-spotify-player-wrapper.visible {
transform: translateY(0) translateZ(0);
}

.docked-spotify-player-container {
flex-grow: 1;
height: 100%;
padding: 0;
}

#docked-spotify-iframe {
width: 100%;
height: 100%;
display: block;
border: none;
}

#closeDockedPlayerButton {
flex-shrink: 0;
background: transparent;
color: white;
border: none;
width: 44px;
height: 100%;
font-size: 20px;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
padding: 0 10px;
}
#closeDockedPlayerButton:hover {
background: rgba(255,255,255,0.1);
}

/* Settings Modal */
.modal-overlay {
display: none;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.6);
z-index: 2999;
}
.modal-overlay.visible {
display: block;
}
.modal-container {
display: none;
position: fixed;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
background: #fff;
padding: 25px;
border-radius: 8px;
box-shadow: 0 5px 15px rgba(0,0,0,0.3);
z-index: 3000;
width: 90%;
max-width: 400px;
}
.modal-container.visible {
display: block;
}
.modal-header {
display: flex;
justify-content: space-between;
align-items: center;
border-bottom: 1px solid #eee;
padding-bottom: 15px;
margin-bottom: 15px;
}
.modal-header h2 {
margin: 0;
font-size: 1.2em;
}
.close-modal-btn {
background: none;
border: none;
font-size: 24px;
cursor: pointer;
color: #888;
padding: 0;
line-height: 1;
}
.setting-group {
margin-bottom: 20px;
}
.setting-group fieldset {
border: 1px solid #ccc;
border-radius: 4px;
padding: 10px 15px;
}
.setting-group legend {
padding: 0 5px;
font-weight: bold;
}
.setting-group label {
display: block;
margin: 8px 0;
cursor: pointer;
}
.setting-group input[type="radio"] {
margin-right: 8px;
}
#openPlaylistBtn {
display: flex;
width: 100%;
padding: 12px;
background-color: #54c07b;
color: white !important;
border: none;
border-radius: 5px;
font-size: 1em;
cursor: pointer;
text-decoration: none;
justify-content: center;
align-items: center;
gap: 10px;
margin-top: 20px;
}
#openPlaylistBtn:hover {
background-color: #67c989;
}
.utility-button {
width: 100%;
padding: 10px;
background: #f0f0f0;
color: #333;
border: 1px solid #ccc;
border-radius: 5px;
cursor: pointer;
font-size: 0.9em;
font-family: Arial, sans-serif;
}
.utility-button:hover {
background: #e0e0e0;
}


body.dark-mode {
background: #282c34;
color: #abb2bf;
}
body.dark-mode .control-bar-group {
background: #282c34;
box-shadow: 0 2px 5px rgba(0,0,0,0.4);
}
body.dark-mode .day-filter-button,
body.dark-mode .filter-button,
body.dark-mode #searchField {
background: #4b5059;
color: #c6cdd5;
border-color: #5b6069;
}
body.dark-mode #searchField {
padding-left: 35px;
}
body.dark-mode .search-input-icon {
color: #98a0ad;
}
body.dark-mode #searchField:focus + .search-input-icon {
color: #61afef;
}
body.dark-mode #searchField.has-content + .search-input-icon {
color: #282c34;
}

body.dark-mode .day-filter-button.active,
body.dark-mode .filter-button.active {
background: #61afef;
color: #282c34;
}
body.dark-mode #favoriteToggleBtn i {
color: #e06c75;
}
body.dark-mode #searchField::placeholder {
color: #98a0ad;
}
body.dark-mode #searchField.has-content {
background: #61afef;
color: #282c34;
}
body.dark-mode .info-container {
background: #3b4048;
box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
body.dark-mode .artist-card {
background: #3b4048;
box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}
body.dark-mode .artist-photo {
background-color: #4b5059;
}
body.dark-mode .artist-name {
color: #61afef;
}
body.dark-mode .sort-icon, body.dark-mode #settingsBtn {
color: #abb2bf;
}
body.dark-mode .sort-icon.active {
color: #61afef;
}
body.dark-mode .favorite-icon {
color: #e06c75;
}
body.dark-mode #errorMessage {
color: #e06c75;
background: #4b3030;
border-color: #c05050;
}
body.dark-mode .info-container #countText,
body.dark-mode .info-container #countdownText,
body.dark-mode .info-container #countTextClone {
color: inherit;
}
body.dark-mode .artist-card h2 {
color: inherit;
}
body.dark-mode mark {
background-color: #61afef;
color: #282c34;
}
body.dark-mode .youtube-links-container {
border-top-color: #4b5059;
}
body.dark-mode .youtube-link-item {
background-color: #353a40;
}
body.dark-mode .youtube-link-item:hover {
background-color: #40454c;
}
body.dark-mode .youtube-thumbnail {
}
body.dark-mode .youtube-title {
color: #c6cdd5;
}

body.dark-mode .google-search-button {
background-color: #61afef;
}

body.dark-mode .google-search-button:hover {
background-color: #82c0ff;
}

body.dark-mode .docked-spotify-player-wrapper {
background-color: #181818;
}
body.dark-mode #closeDockedPlayerButton {
color: #abb2bf;
}
body.dark-mode #closeDockedPlayerButton:hover {
background: rgba(255,255,255,0.05);
}
body.dark-mode .podia-buttons-container {
background: transparent;
border-color: transparent;
}
body.dark-mode .podia-buttons-container .filter-button {
box-shadow: 0 2px 5px rgba(0,0,0,0.5);
}

body.dark-mode .modal-container {
background: #3b4048;
color: #abb2bf;
}
body.dark-mode .modal-header {
border-bottom-color: #4b5059;
}
body.dark-mode .close-modal-btn {
color: #98a0ad;
}
body.dark-mode .setting-group fieldset {
border-color: #5b6069;
}
body.dark-mode .utility-button {
background: #4b5059;
color: #c6cdd5;
border-color: #5b6069;
}
body.dark-mode .utility-button:hover {
background: #5b6069;
}

.is-today::after {
content: '';
position: absolute;
bottom: 4px;
left: 15%;
width: 70%;
height: 3px;
border-radius: 2px;
transition: background-color 0.2s ease-in-out;
}
body:not(.dark-mode) .is-today:not(.active)::after {
background-color: #007bff;
}
body:not(.dark-mode) .is-today.active::after {
background-color: #ddd;
}
body.dark-mode .is-today:not(.active)::after {
background-color: #61afef;
}
body.dark-mode .is-today.active::after {
background-color: #282c34;
}
</style>
</head>
<body class="dark-mode">

<div id="controlBarGroup" class="control-bar-group">
<div class="day-filter-container">
<button class="day-filter-button" data-dayfilter="12 juli">Za</button>
<button class="day-filter-button" data-dayfilter="13 juli">Zo</button>
<button class="day-filter-button" data-dayfilter="14 juli">Ma</button>
<button class="day-filter-button" data-dayfilter="15 juli">Di</button>
<button class="day-filter-button" data-dayfilter="16 juli">Wo</button>
<button class="day-filter-button" data-dayfilter="17 juli">Do</button>
<button class="day-filter-button" data-dayfilter="18 juli">Vr</button>
</div>

<div class="filter-container">
<div class="podia-master-container">
<button id="podiaToggleBtn" class="filter-button">
<span>Podia</span>
<span id="podiaIndicator" class="podia-indicator"></span>
</button>
<div id="podiaButtonsContainer" class="podia-buttons-container">
<button class="filter-button" data-podium="Arc">Arc</button>
<button class="filter-button" data-podium="Boog">Boog</button>
<button class="filter-button" data-podium="Club Voerweg">Voerweg</button>
<button class="filter-button" data-podium="Tuin">Tuin</button>
<button class="filter-button" data-podium="Poort">Poort</button>
<button class="filter-button" data-podium="Kapel">Kapel</button>
</div>
</div>
<button id="nowNextBtn" class="filter-button">Nu & Straks</button>
<button id="favoriteToggleBtn" class="filter-button" title="Toon favorieten">
<i class="fa-regular fa-heart"></i><span>Leuk</span>
</button>
<div class="search-wrapper">
<input type="search" id="searchField" placeholder="Zoek.." autocomplete="off">
<i class="fa-solid fa-magnifying-glass search-input-icon"></i>
</div>
</div>


<div class="info-container">
<div id="statusContainer">
<div id="statusSlider">
<span id="countText"></span>
<span id="countdownText"></span>
<span id="countTextClone"></span>
</div>
</div>
<span class="icons-group">
<i id="sortAlpha" class="sort-icon fa-solid fa-sort-alpha-down" title="Alfabetisch sorteren"></i>
<i id="sortTime" class="sort-icon fa-solid fa-clock" title="Sorteren op tijd"></i>
<i id="settingsBtn" class="fa-solid fa-cog" title="Instellingen"></i>
</span>
</div>
</div>

<div id="errorMessage"></div>
<div id="artistList"></div>

<div id="dockedSpotifyPlayerWrapper" class="docked-spotify-player-wrapper">
<div id="dockedSpotifyPlayerContainer" class="docked-spotify-player-container">
</div>
<button id="closeDockedPlayerButton" title="Sluit player"><i class="fa-solid fa-xmark"></i></button>
</div>

<div id="settingsModalOverlay" class="modal-overlay"></div>
<div id="settingsModal" class="modal-container">
<div class="modal-header">
<h2>Instellingen</h2>
<button id="closeModalBtn" class="close-modal-btn">&times;</button>
</div>
<div class="modal-content">
<div class="setting-group">
<fieldset>
<legend>Dagknoppen</legend>
<label><input type="radio" name="dayFilterMode" value="tabs" checked> Als tabbladen (1 dag tegelijk)</label>
<label><input type="radio" name="dayFilterMode" value="filter"> Als filters (meer dagen mogelijk)</label>
</fieldset>
</div>
<div class="setting-group">
<fieldset>
<legend>Nu & Straks filter</legend>
<label><input type="radio" name="nowNextMode" value="1hr" checked> Nu + binnen 1 uur</label>
<label><input type="radio" name="nowNextMode" value="2hr"> Nu + binnen 2 uur</label>
<label><input type="radio" name="nowNextMode" value="day"> Nu + rest van de dag</label>
</fieldset>
</div>
<div class="setting-group">
<button id="clearCacheBtn" class="utility-button">Artiestendetails resetten</button>
</div>
<a href="spotify:playlist:3ako4RWocyBsF3uk0A29K1" id="openPlaylistBtn">
<i class="fa-brands fa-spotify"></i> Officiële Playlist
</a>
</div>
</div>

<script>
(function(){
const CORS_PROXY_PRIMARY = 'https://api.codetabs.com/v1/proxy?quest=',
CORS_PROXY_FALLBACK = 'https://corsproxy.io/?',
BASE_URL = 'https://valkhoffestival.nl',
WEEK_URL = BASE_URL + '/lineup/',
PREFIX = 'vf_',
ALL_ARTISTS_DATA_CACHE_VERSION_SUFFIX = '_v6',
ALL_ARTISTS_DATA_CACHE_KEY = PREFIX + 'allArtistsData' + ALL_ARTISTS_DATA_CACHE_VERSION_SUFFIX,
ALL_ARTISTS_DATA_TIMESTAMP_KEY = PREFIX + 'allArtistsData_timestamp' + ALL_ARTISTS_DATA_CACHE_VERSION_SUFFIX,
CACHE_MAX_AGE_MS = 60 * 60 * 1000,
FESTIVAL_START_DATE = new Date('2025-07-12T00:00:00'),
PLACEHOLDER_IMG_URL = `https://placehold.co/300x300/e0e0e0/777?text=Foto`;

const artistListElement = document.getElementById('artistList'),
errorMessageElement = document.getElementById('errorMessage'),
searchFieldElement = document.getElementById('searchField'),
sortAlphaElement = document.getElementById('sortAlpha'),
sortTimeElement = document.getElementById('sortTime'),
favoriteToggleBtn = document.getElementById('favoriteToggleBtn'),
dayFilterContainerElement = document.querySelector('.day-filter-container'),
filterContainerElement = document.querySelector('.filter-container'),
controlBarGroup = document.getElementById('controlBarGroup'),
iconsGroupElement = document.querySelector('.icons-group'),
dockedSpotifyPlayerWrapper = document.getElementById('dockedSpotifyPlayerWrapper'),
dockedSpotifyPlayerContainer = document.getElementById('dockedSpotifyPlayerContainer'),
closeDockedPlayerButton = document.getElementById('closeDockedPlayerButton'),
statusContainer = document.getElementById('statusContainer'),
statusSlider = document.getElementById('statusSlider'),
countTextElement = document.getElementById('countText'),
countdownTextElement = document.getElementById('countdownText'),
countTextCloneElement = document.getElementById('countTextClone'),
podiaToggleBtn = document.getElementById('podiaToggleBtn'),
podiaIndicator = document.getElementById('podiaIndicator'),
podiaButtonsContainer = document.getElementById('podiaButtonsContainer'),
nowNextBtn = document.getElementById('nowNextBtn'),
settingsBtn = document.getElementById('settingsBtn'),
settingsModal = document.getElementById('settingsModal'),
settingsModalOverlay = document.getElementById('settingsModalOverlay'),
closeModalBtn = document.getElementById('closeModalBtn'),
clearCacheBtn = document.getElementById('clearCacheBtn');


const isAndroidDevice = /android/i.test(navigator.userAgent);

let lastScrollY = window.scrollY;
let ticking = false;

let allArtistsData = [],
searchClickShouldClear = false;

let statusInterval = null;
let liveStatusInterval = null; // Interval voor live updates
let currentStatusIndex = 0;
const SLIDE_HEIGHT = 20;
const ANIMATION_INTERVAL = 5000;
const TRANSITION_DURATION = 600;

const dagen = ['zondag','maandag','dinsdag','woensdag','donderdag','vrijdag','zaterdag'];
const originalHTMLMap = new WeakMap();


function normalizeForSearch(str) {
if (typeof str !== 'string') return '';
return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
}

const charMapForRegex = {
'a': 'aàáâãäåāăąæ', 'c': 'cçćč', 'e': 'eèéêëēĕėęě',
'g': 'gğ', 'i': 'iıíìîï', 'o': 'oòóôõöøōŏő', 's': 'sşšś',
'u': 'uùúûüůūŭůű', 'n': 'nñ',
'ı': 'iıíìîï', 'ü': 'uùúûüůūŭůű', 'ö': 'oòóôõöøōŏő',
'ş': 'sşšś', 'ç': 'cçćč', 'ğ': 'gğ'
};

function buildFlexibleHighlightRegex(originalSearchTerm) {
if (!originalSearchTerm) return null;
let regexPattern = '';

function getSingleBaseChar(charInput) {
const lowerChar = charInput.toLowerCase();
const normalized = lowerChar.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
return normalized.length > 0 ? normalized : lowerChar;
}

for (const char of originalSearchTerm) {
const baseLookupChar = getSingleBaseChar(char);
let charClass = charMapForRegex[baseLookupChar];

if (charClass) {
regexPattern += '[' + charClass + ']';
} else {
regexPattern += escapeRegExp(char);
}
}
try {
return new RegExp(regexPattern, 'giu');
} catch (e) {
console.error("Failed to create regex from pattern:", regexPattern, e);
return new RegExp(escapeRegExp(originalSearchTerm), 'giu');
}
}

function getStoredJSON(keySuffix, defaultValue) {
const item = localStorage.getItem(keySuffix);
if (item === null) return defaultValue;
try {
return JSON.parse(item);
} catch (e) {
console.warn(`Failed to parse ${keySuffix} from localStorage.`, e);
localStorage.removeItem(keySuffix);
return defaultValue;
}
}

function setStoredJSON(keySuffix, value) {
localStorage.setItem(keySuffix, JSON.stringify(value));
}

function getStoredString(keySuffix, defaultValue) {
const item = localStorage.getItem(PREFIX + keySuffix);
return item === null ? defaultValue : item;
}

function setStoredString(keySuffix, value) {
localStorage.setItem(PREFIX + keySuffix, value);
}

let sortMode = getStoredString('sortMode', 'time'),
activePodia = getStoredJSON(PREFIX + 'activePodia', []),
favorites = getStoredJSON(PREFIX + 'favorites', []),
showingFavs = getStoredJSON(PREFIX + 'showingFavs', false),
showingNowNext = false,
activeDays = getStoredJSON(PREFIX + 'activeDays', []),
dayFilterMode = getStoredString('dayFilterMode', 'tabs'),
nowNextMode = getStoredString('nowNextMode', '1hr');

function capitalize(s){
if(!s) return s;
return s.split(' ').map(word =>
word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()
).join(' ');
}

function showError(msg){
errorMessageElement.textContent = msg;
errorMessageElement.style.display = 'block';
}
function hideError(){
errorMessageElement.style.display = 'none';
}
function getFullUrl(url){
return url.startsWith('http')
? url
: BASE_URL + (url.startsWith('/') ? '' : '/') + url;
}

async function fetchWithProxyFallback(url) {
const proxies = [CORS_PROXY_PRIMARY, CORS_PROXY_FALLBACK];
for (const proxy of proxies) {
try {
const res = await fetch(proxy + url);
if (res.ok) {
console.log(`Successfully fetched ${url} via ${proxy}`);
return res;
}
console.warn(`Fetch via ${proxy} failed with status ${res.status}`);
} catch (err) {
console.warn(`Fetch via ${proxy} threw an error:`, err);
}
}
throw new Error(`Failed to fetch ${url} using all available proxies.`);
}

async function fetchArtistInfo(artistBasicInfo) {
const artistCacheKey = PREFIX + 'artist_info_' + artistBasicInfo.name.replace(/[^a-zA-Z0-9]/g, '_') + '_v2';
const stored = localStorage.getItem(artistCacheKey);
if (stored) {
try {
const infoData = JSON.parse(stored);
const isNewStructure = infoData.youtubeLinks && typeof infoData.spotifyUri !== 'undefined' ?
(infoData.youtubeLinks.length > 0 ? typeof infoData.youtubeLinks[0].videoId !== 'undefined' : true) :
typeof infoData.spotifyId === 'undefined';
if (isNewStructure) {
return infoData;
} else {
console.warn(`Cached artist info for ${artistBasicInfo.name} (key ${artistCacheKey}) has old structure. Refetching.`);
localStorage.removeItem(artistCacheKey);
}
} catch (e) {
console.warn(`Failed to parse cached artist info for ${artistBasicInfo.name} (key ${artistCacheKey}). Refetching.`, e);
localStorage.removeItem(artistCacheKey);
}
}

try {
const res = await fetchWithProxyFallback(artistBasicInfo.artistUrl);
if (!res.ok) return null;
const html = await res.text();
const doc = new DOMParser().parseFromString(html, 'text/html');
const tags = Array.from(doc.querySelectorAll('.meta .tag'));
const paras = doc.querySelectorAll('.description p');

const spotifyIframe = doc.querySelector('.spotify iframe');
let spotifyUri = null;
if (spotifyIframe) {
const src = spotifyIframe.getAttribute('src');
if (src) {
const match = src.match(/(spotify:(?:artist|album|track):[^&?]+)/);
if (match && match[1]) {
spotifyUri = match[1];
}
}
}

if (artistBasicInfo.name === 'Sinem' && !spotifyUri) {
spotifyUri = 'spotify:artist:44F4eMW1zuDkuHXnGzcCNx';
}

const youtubeIframes = doc.querySelectorAll('figure.wp-block-embed.is-provider-youtube iframe');
let youtubeLinks = [];
if (youtubeIframes.length > 0) {
youtubeIframes.forEach(iframe => {
const src = iframe.getAttribute('src');
const title = iframe.getAttribute('title');
if (src && title) {
const videoIdMatch = src.match(/embed\/([^?]+)/);
if (videoIdMatch && videoIdMatch[1]) {
const videoId = videoIdMatch[1];
youtubeLinks.push({
url: `https://www.youtube.com/watch?v=${videoId}`,
title: title,
videoId: videoId
});
}
}
});
}

const rawPodium = tags[tags.length - 3]?.textContent.trim() || 'Onbekend';
const rawDatum = tags[tags.length - 2]?.textContent.trim() || 'Onbekend';
const rawTijd = tags[tags.length - 1]?.textContent.trim() || 'Onbekend';

let duurTekst = '';
if (rawTijd.includes('-')) {
const [start, end] = rawTijd.split('-').map(s => s.trim());
const [su, sm] = start.split(':').map(n => parseInt(n, 10));
const [eu, em] = end.split(':').map(n => parseInt(n, 10));
if (!isNaN(su) && !isNaN(sm) && !isNaN(eu) && !isNaN(em)) {
let minutesStart = su * 60 + sm;
let minutesEnd = eu * 60 + em;
if (minutesEnd <= minutesStart) minutesEnd += 24 * 60;
const diff = minutesEnd - minutesStart;
if (diff > 0 && diff <= 24 * 60) duurTekst = diff + ' min';
}
}

const info = {
genres: tags.slice(0, -3).map(t => t.textContent.trim()),
podium: capitalize(rawPodium),
datum: rawDatum,
tijd: rawTijd,
duur: duurTekst,
description: Array.from(paras).map(p => p.innerHTML.trim()).filter(html => html).join('\n\n') || 'Geen beschrijving beschikbaar',
spotifyUri: spotifyUri,
youtubeLinks: youtubeLinks
};
localStorage.setItem(artistCacheKey, JSON.stringify(info));
return info;
} catch (err) {
console.error(`Error fetching info for ${artistBasicInfo.name}:`, err);
return null;
}
}

async function loadAllArtistsData() {
hideError();

const cachedDataTimestamp = getStoredJSON(ALL_ARTISTS_DATA_TIMESTAMP_KEY, 0);
if (Date.now() - cachedDataTimestamp > CACHE_MAX_AGE_MS) {
console.warn(`Cache for ${ALL_ARTISTS_DATA_CACHE_KEY} is older than 1 hour. Invalidating.`);
localStorage.removeItem(ALL_ARTISTS_DATA_CACHE_KEY);
localStorage.removeItem(ALL_ARTISTS_DATA_TIMESTAMP_KEY);
}

const cachedData = localStorage.getItem(ALL_ARTISTS_DATA_CACHE_KEY);
if (cachedData) {
try {
let parsedAllArtistsData = JSON.parse(cachedData);
if (parsedAllArtistsData.length > 0 && typeof parsedAllArtistsData[0].artist.imageUrl === 'undefined') {
console.warn(`Cache for ${ALL_ARTISTS_DATA_CACHE_KEY} has old structure (missing imageUrl). Invalidating.`);
localStorage.removeItem(ALL_ARTISTS_DATA_CACHE_KEY);
localStorage.removeItem(ALL_ARTISTS_DATA_TIMESTAMP_KEY);
} else {
allArtistsData = parsedAllArtistsData;
console.log(`All artists data loaded from cache (key: ${ALL_ARTISTS_DATA_CACHE_KEY}).`);
return;
}
} catch (e) {
console.warn(`Failed to parse ${ALL_ARTISTS_DATA_CACHE_KEY} from cache, fetching fresh.`, e);
localStorage.removeItem(ALL_ARTISTS_DATA_CACHE_KEY);
localStorage.removeItem(ALL_ARTISTS_DATA_TIMESTAMP_KEY);
}
}

allArtistsData = [];
updateArtistCount(0, 'Artiesten laden...');
try {
const res = await fetchWithProxyFallback(WEEK_URL);
if (!res.ok) {
showError(`Kon basis artiestenlijst niet laden (status ${res.status}).`);
return;
}
const html = await res.text();
const doc = new DOMParser().parseFromString(html, 'text/html');

const urlRegex = /url\('([^']+)'\)/;

const artistBasicInfos = Array.from(doc.querySelectorAll('a.artist'))
.map(a => {
const name = a.querySelector('.nameplate h2').textContent.replace(/\s+/g, ' ').trim();
const artistUrl = getFullUrl(a.getAttribute('href'));

const innerDiv = a.querySelector('.artist-inner');
const styleAttr = innerDiv?.getAttribute('style');
const styleMatch = styleAttr ? styleAttr.match(urlRegex) : null;
const imageUrl = styleMatch && styleMatch[1] ? getFullUrl(styleMatch[1]) : null;

return { name, artistUrl, imageUrl };
});

const newAllArtistsData = [];
let fetchedCount = 0;
for (const basicInfo of artistBasicInfos) {
const info = await fetchArtistInfo(basicInfo);
newAllArtistsData.push({
artist: basicInfo,
info: info || {
genres: [], podium: 'Onbekend', datum: 'Onbekend', tijd: 'Onbekend',
duur: '', description: 'Details konden niet geladen worden.', spotifyUri: null,
youtubeLinks: []
}
});
fetchedCount++;
updateArtistCount(fetchedCount, `Details geladen voor ${fetchedCount}/${artistBasicInfos.length} artiesten...`);
}

allArtistsData = newAllArtistsData;
localStorage.setItem(ALL_ARTISTS_DATA_CACHE_KEY, JSON.stringify(allArtistsData));
setStoredJSON(ALL_ARTISTS_DATA_TIMESTAMP_KEY, Date.now());
console.log(`All artists data fetched and cached (key: ${ALL_ARTISTS_DATA_CACHE_KEY}).`);

} catch (err) {
console.error("Error during fetch of all artists data:",err);
showError('Netwerkfout bij ophalen artiestenlijst.');
}
}

function parseDateTimeForSort(datum, tijd) {
if (!datum || !tijd || datum === 'Onbekend' || tijd === 'Onbekend' || !tijd.includes(':')) {
return { start: 0, end: 0 };
}

const datumParts = datum.split(' ');
if (datumParts.length < 2) return { start: 0, end: 0 };
const dagNum = parseInt(datumParts[0], 10);

const tijdDelen = tijd.split('-').map(s => s.trim());
const startTimeStr = tijdDelen[0];
const endTimeStr = tijdDelen.length > 1 ? tijdDelen[1] : null;

const startTijdParts = startTimeStr.split(':');
if (startTijdParts.length < 2) return { start: 0, end: 0 };

const startUur = parseInt(startTijdParts[0], 10);
const startMin = parseInt(startTijdParts[1], 10);

if (isNaN(dagNum) || isNaN(startUur) || isNaN(startMin)) {
return { start: 0, end: 0 };
}

const startDate = new Date(2025, 6, dagNum, startUur, startMin);
const startTimestamp = startDate.getTime();

if (!endTimeStr) {
return { start: startTimestamp, end: startTimestamp + (60 * 60 * 1000) };
}

const endTijdParts = endTimeStr.split(':');
if (endTijdParts.length < 2) {
return { start: startTimestamp, end: startTimestamp + (60 * 60 * 1000) };
}

const eindUur = parseInt(endTijdParts[0], 10);
const eindMin = parseInt(endTijdParts[1], 10);

if (isNaN(eindUur) || isNaN(eindMin)) {
return { start: startTimestamp, end: startTimestamp + (60 * 60 * 1000) };
}

let endDate = new Date(2025, 6, dagNum, eindUur, eindMin);

if (endDate <= startDate) {
endDate.setDate(endDate.getDate() + 1);
}

return { start: startTimestamp, end: endDate.getTime() };
}

function renderAllArtistCardsOnce() {
artistListElement.innerHTML = '';

allArtistsData.forEach(({ artist, info }) => {
const card = document.createElement('div');
card.className = 'artist-card';
card.style.display = 'none';

const timestamps = parseDateTimeForSort(info.datum, info.tijd);

card.dataset.name = normalizeForSearch(artist.name);
card.dataset.rawName = artist.name;
card.dataset.podium = info.podium;
card.dataset.dag = info.datum;
card.dataset.tijdInfo = info.tijd;
card.dataset.timestamp = timestamps.start;
card.dataset.timestampStart = timestamps.start;
card.dataset.timestampEnd = timestamps.end;
card.dataset.genres = normalizeForSearch(info.genres.join(','));
card.dataset.description = normalizeForSearch(info.description.replace(/<[^>]*>/g, ' '));

if (info.youtubeLinks && info.youtubeLinks.length > 0) {
card.dataset.youtubeTitles = normalizeForSearch(info.youtubeLinks.map(link => link.title).join(' '));
} else {
card.dataset.youtubeTitles = '';
}

if (info.spotifyUri) {
card.dataset.spotifyUri = info.spotifyUri;
}

const transparentPixel = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';

const proxiedImageUrlForDataSrc = artist.imageUrl
? `https://images.weserv.nl/?url=${encodeURIComponent(artist.imageUrl)}&w=300&h=300&fit=cover&q=75&dpr=2&output=webp`
: PLACEHOLDER_IMG_URL;

const imageTag = `
<img
data-src="${proxiedImageUrlForDataSrc}"
src="${transparentPixel}"
alt="Foto van ${artist.name}"
class="artist-photo lazyload">`;

let imageHtml;
if (artist.imageUrl) {
const highResUrl = `https://images.weserv.nl/?url=${encodeURIComponent(artist.imageUrl)}&w=2000&h=2000&fit=inside&q=85&output=jpg`;
imageHtml = `<a href="${highResUrl}" target="_blank" title="Bekijk foto in hoge kwaliteit">${imageTag}</a>`;
} else {
imageHtml = imageTag;
}

const dagNum = info.datum !== 'Onbekend' ? info.datum.split(' ')[0].padStart(2, '0') : '';
let dagNaam = '';
if (dagNum) {
const date = new Date(2025, 6, parseInt(dagNum, 10));
if (!isNaN(date.getTime())) {
dagNaam = dagen[date.getDay()];
}
}

const isFav = favorites.includes(artist.name);

let actionControlsHtml = '';
if (info.spotifyUri) {
const googleSearchUrl = `https://www.google.com/search?q=${encodeURIComponent(artist.name)}`;

let youtubeSearchUrl;
let youtubeLinkAttributes = '';

if (isAndroidDevice) {
const youtubeSearchQuery = encodeURIComponent(artist.name).replace(/%20/g, '+');
youtubeSearchUrl = `vnd.youtube://results?search_query=${youtubeSearchQuery}`;
} else {
const youtubeSearchQuery = encodeURIComponent(artist.name).replace(/%20/g, '+');
youtubeSearchUrl = `https://www.youtube.com/results?search_query=${youtubeSearchQuery}`;
youtubeLinkAttributes = 'target="_blank" rel="noopener noreferrer"';
}

actionControlsHtml = `
<div class="action-buttons-wrapper">
<a href="${info.spotifyUri}" class="spotify-open-button" title="Open in Spotify">
<i class="fa-solid fa-up-right-from-square"></i>
</a>
<div class="stacked-buttons-column">
<button class="spotify-play-button" data-spotify-uri="${info.spotifyUri}">
<i class="fa-brands fa-spotify"></i> Preview
</button>
<a href="${googleSearchUrl}" class="google-search-button search-button" target="_blank" rel="noopener noreferrer">
<i class="fa-brands fa-google"></i> Zoek..
</a>
<a href="${youtubeSearchUrl}" class="youtube-search-button search-button" ${youtubeLinkAttributes}>
<i class="fa-brands fa-youtube"></i> Zoek..
</a>
</div>
</div>`;
}

let youtubeLinksHtml = '';
if (info.youtubeLinks && info.youtubeLinks.length > 0) {
youtubeLinksHtml = '<div class="youtube-links-container">';
info.youtubeLinks.forEach(ytLink => {
if (ytLink.videoId) {
const thumbnailUrl = `https://img.youtube.com/vi/${ytLink.videoId}/mqdefault.jpg`;
let linkUrl;
let linkTarget = '';

if (isAndroidDevice) {
linkUrl = `vnd.youtube:${ytLink.videoId}`;
} else {
linkUrl = ytLink.url;
linkTarget = 'target="_blank" rel="noopener noreferrer"';
}

youtubeLinksHtml += `
<a href="${linkUrl}" ${linkTarget} class="youtube-link-item">
<img data-src="${thumbnailUrl}" src="${transparentPixel}" alt="Thumbnail: ${ytLink.title}" class="youtube-thumbnail lazyload">
<span class="youtube-title">${ytLink.title}</span>
</a>`;
}
});
youtubeLinksHtml += '</div>';
}

const durationText = info.duur ? ` (${info.duur})` : '';

card.innerHTML = `
<div class="artist-header">
<h2>
<a href="${artist.artistUrl}" target="_blank" class="artist-name">${artist.name}</a>
<span class="now-playing-indicator">
<svg class="vu-meter-icon" viewBox="0 0 30 30">
<rect class="bar" x="3" y="10" width="4.5" height="20" />
<rect class="bar" x="9.5" y="10" width="4.5" height="20" />
<rect class="bar" x="16" y="10" width="4.5" height="20" />
<rect class="bar" x="22.5" y="10" width="4.5" height="20" />
</svg>
</span>
</h2>
<span class="favorite-icon" data-name="${artist.name}">
${isFav ? '<i class="fa-solid fa-heart"></i>' : '<i class="fa-regular fa-heart"></i>'}
</span>
</div>
${imageHtml}
<div class="artist-meta-container">
<div class="artist-info">
<p class="highlightable-genres"><strong>Genre:</strong> ${info.genres.join(', ') || 'Geen genres'}</p>
<p class="highlightable-podium"><strong>Podium:</strong> ${info.podium}</p>
<p><strong>Datum:</strong> ${dagNaam ? capitalize(dagNaam) + ' ' : ''}${info.datum}</p>
<p class="time-info" data-duration-text="${durationText}"><strong>Tijd:</strong> ${info.tijd}${durationText}</p>
</div>
${actionControlsHtml}
</div>
<div class="artist-description highlightable-description">
<p>${info.description.replace(/\n\n/g, '</p><p>')}</p>
</div>
${youtubeLinksHtml}`;
artistListElement.appendChild(card);
});
}


function setupImageLazyLoader() {
const lazyImages = document.querySelectorAll('img.lazyload[data-src]');
if ('IntersectionObserver' in window) {
let imageObserver = new IntersectionObserver((entries, observer) => {
entries.forEach(entry => {
if (entry.isIntersecting) {
const image = entry.target;
const proxiedSrc = image.dataset.src;
const originalSrc = image.dataset.originalSrc;

image.onerror = function() {
if (this.src !== originalSrc) {
console.warn(`Image proxy (${proxiedSrc}) failed to load. Falling back to original source: ${originalSrc}`);
this.src = originalSrc;
}
this.onerror = null;
};

image.src = proxiedSrc;
image.classList.remove('lazyload');
imageObserver.unobserve(image);
}
});
}, { rootMargin: '200px 0px 200px 0px' });
lazyImages.forEach(image => imageObserver.observe(image));
} else {
lazyImages.forEach(image => {
const proxiedSrc = image.dataset.src;
const originalSrc = image.dataset.originalSrc;
image.onerror = function() {
if (this.src !== originalSrc) {
console.warn(`Image proxy (${proxiedSrc}) failed (no IO). Falling back to original source: ${originalSrc}`);
this.src = originalSrc;
}
this.onerror = null;
};
image.src = proxiedSrc;
image.classList.remove('lazyload');
});
}
}

function escapeRegExp(string) {
return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
}

function clearHighlight(element) {
if (element && originalHTMLMap.has(element)) {
element.innerHTML = originalHTMLMap.get(element);
}
}

function applyHighlight(element, originalSearchTerm) {
if (!element || !originalSearchTerm) return;

if (!originalHTMLMap.has(element)) {
originalHTMLMap.set(element, element.innerHTML);
}
element.innerHTML = originalHTMLMap.get(element);

const regex = buildFlexibleHighlightRegex(originalSearchTerm);
if (!regex) return;

function highlightNodeRecursive(node) {
if (node.nodeType === Node.TEXT_NODE) {
const text = node.nodeValue;
regex.lastIndex = 0;
if (regex.test(text)) {
regex.lastIndex = 0;
const fragment = document.createDocumentFragment();
let lastIndex = 0;
let match;
while ((match = regex.exec(text)) !== null) {
const matchedText = match[0];
const matchStartIndex = match.index;

if (matchStartIndex > lastIndex) {
fragment.appendChild(document.createTextNode(text.substring(lastIndex, matchStartIndex)));
}
const mark = document.createElement('mark');
mark.textContent = matchedText;
fragment.appendChild(mark);
lastIndex = regex.lastIndex;
if (matchedText.length === 0) {
regex.lastIndex++;
}
}
if (lastIndex < text.length) {
fragment.appendChild(document.createTextNode(text.substring(lastIndex)));
}
if (fragment.childNodes.length > 0) {
node.parentNode.replaceChild(fragment, node);
}
}
} else if (node.nodeType === Node.ELEMENT_NODE) {
if (node.tagName.toLowerCase() === 'mark' || node.tagName.toLowerCase() === 'script' || node.tagName.toLowerCase() === 'style') {
return;
}
Array.from(node.childNodes).forEach(highlightNodeRecursive);
}
}
highlightNodeRecursive(element);
}


function scrollToArtistListTop() {
if (!artistListElement || !controlBarGroup) return;
window.scrollTo({ top: 0, behavior: 'auto' });
if (controlBarGroup) {
controlBarGroup.classList.remove('hidden');
}
lastScrollY = 0;
}

function applyFiltersAndSort(options = {}) {
hideError();
const originalSearchTerm = searchFieldElement.value;
const normalizedSearchTerm = normalizeForSearch(originalSearchTerm);
let visibleCount = 0;

const cardElements = artistListElement.children;
const now = new Date().getTime();

for (const card of cardElements) {
const {
name: normalizedArtistName,
podium,
dag,
genres: normalizedGenres,
description: normalizedDescription,
youtubeTitles: normalizedYoutubeTitles,
rawName,
timestampStart,
timestampEnd
} = card.dataset;

const artistNameEl = card.querySelector('.artist-name');
const genresEl = card.querySelector('.highlightable-genres');
const podiumEl = card.querySelector('.highlightable-podium');
const descriptionEl = card.querySelector('.highlightable-description');
const youtubeTitleEls = card.querySelectorAll('.youtube-title');

clearHighlight(artistNameEl);
clearHighlight(genresEl);
clearHighlight(podiumEl);
clearHighlight(descriptionEl);
youtubeTitleEls.forEach(el => clearHighlight(el));

const matchesDay = !activeDays.length || activeDays.includes(dag);
const matchesPodium = !activePodia.length || activePodia.includes(podium);

const matchesSearch = !normalizedSearchTerm ||
normalizedArtistName.includes(normalizedSearchTerm) ||
normalizedDescription.includes(normalizedSearchTerm) ||
normalizedGenres.includes(normalizedSearchTerm) ||
normalizeForSearch(podium).includes(normalizedSearchTerm) ||
(normalizedYoutubeTitles && normalizedYoutubeTitles.includes(normalizedSearchTerm));

const matchesFavs = !showingFavs || favorites.includes(rawName);

const start = parseInt(timestampStart, 10);
const end = parseInt(timestampEnd, 10);
const isNow = start > 0 && start <= now && end > now;

let isNext = false;
if (start > 0) {
switch(nowNextMode) {
case '1hr':
const oneHourFromNow = now + 3600000;
isNext = start > now && start <= oneHourFromNow;
break;
case '2hr':
const twoHoursFromNow = now + 7200000;
isNext = start > now && start <= twoHoursFromNow;
break;
case 'day':
const today = new Date();
if (today.getHours() < 3) {
today.setDate(today.getDate() - 1);
}
today.setHours(3, 0, 0, 0);
const endOfArtDay = today.getTime() + 86400000; // 3am next day
isNext = start > now && start < endOfArtDay;
break;
}
}
const matchesNowNext = !showingNowNext || isNow || isNext;

if (matchesDay && matchesPodium && matchesSearch && matchesFavs && matchesNowNext) {
card.style.display = '';
visibleCount++;
if (originalSearchTerm) {
applyHighlight(artistNameEl, originalSearchTerm);
if (genresEl) applyHighlight(genresEl, originalSearchTerm);
if (podiumEl) applyHighlight(podiumEl, originalSearchTerm);
if (descriptionEl) applyHighlight(descriptionEl, originalSearchTerm);
youtubeTitleEls.forEach(el => applyHighlight(el, originalSearchTerm));
}
} else {
card.style.display = 'none';
}

const favIcon = card.querySelector('.favorite-icon');
if (favIcon) {
favIcon.innerHTML = favorites.includes(rawName) ? '<i class="fa-solid fa-heart"></i>' : '<i class="fa-regular fa-heart"></i>';
}
}

const cardsArray = Array.from(cardElements);

cardsArray.sort((a, b) => {
if (sortMode === 'alpha') {
return a.dataset.name.localeCompare(b.dataset.name);
} else {
const timeA = parseInt(a.dataset.timestamp, 10);
const timeB = parseInt(b.dataset.timestamp, 10);
const aIsUnknown = timeA === 0;
const bIsUnknown = timeB === 0;
if (aIsUnknown && bIsUnknown) return a.dataset.name.localeCompare(b.dataset.name);
if (aIsUnknown) return 1;
if (bIsUnknown) return -1;
if (timeA === timeB) return a.dataset.name.localeCompare(b.dataset.name);
return timeA - timeB;
}
});

cardsArray.forEach((card, index) => {
card.style.order = index;
});

updateArtistCount(visibleCount);

if (!options.preserveScroll) {
scrollToArtistListTop();
}
}

function calculateNightsToSleep() {
const now = new Date();
if (now >= FESTIVAL_START_DATE) return null;
const diff = FESTIVAL_START_DATE - now;
return Math.ceil(diff / (1000 * 60 * 60 * 24));
}

function slideStatus() {
const nights = calculateNightsToSleep();
if (nights === null) {
clearInterval(statusInterval);
statusSlider.style.transform = 'translateY(0px)';
return;
}
const plural = nights === 1 ? '' : 'jes';
countdownTextElement.textContent = `Nog ${nights} nacht${plural} slapen..`;

currentStatusIndex++;
statusSlider.style.transform = `translateY(-${currentStatusIndex * SLIDE_HEIGHT}px)`;

if (currentStatusIndex === 2) {
setTimeout(() => {
statusSlider.style.transition = 'none';
currentStatusIndex = 0;
statusSlider.style.transform = 'translateY(0px)';
statusSlider.offsetHeight;
statusSlider.style.transition = `transform ${TRANSITION_DURATION}ms cubic-bezier(0.68, -0.55, 0.27, 1.55)`;
}, TRANSITION_DURATION);
}
}

function startStatusAlternation() {
if (calculateNightsToSleep() === null) return;
clearInterval(statusInterval);
statusInterval = setInterval(slideStatus, ANIMATION_INTERVAL);
}

function updateArtistCount(n, overrideText = null){
clearInterval(statusInterval);
let textToShow;
if (overrideText) {
textToShow = overrideText;
} else {
const pluralSuffix = n === 1 ? '' : 'en';
const entity = showingFavs ? `favoriet${pluralSuffix}` : `artiest${pluralSuffix}`;
textToShow = `${n} ${entity} gevonden`;
}
countTextElement.textContent = textToShow;
countTextCloneElement.textContent = textToShow;
statusSlider.style.transition = 'none';
currentStatusIndex = 0;
statusSlider.style.transform = 'translateY(0px)';
statusSlider.offsetHeight;
statusSlider.style.transition = `transform ${TRANSITION_DURATION}ms cubic-bezier(0.68, -0.55, 0.27, 1.55)`;
startStatusAlternation();
}

function updateFilterButtonsUI(){
document.querySelectorAll('#podiaButtonsContainer .filter-button').forEach(btn=>{
btn.classList.toggle('active', activePodia.includes(btn.dataset.podium));
});
}

function updatePodiaToggleUI() {
const activeCount = activePodia.length;

if (activeCount > 0) {
podiaIndicator.textContent = activeCount;
podiaToggleBtn.classList.add('active');
} else {
podiaIndicator.innerHTML = '<i class="fa-solid fa-chevron-down"></i>';
podiaToggleBtn.classList.remove('active');
}
}


function updateSortIconsUI(){
sortAlphaElement.classList.toggle('active', sortMode === 'alpha');
sortTimeElement.classList.toggle('active', sortMode === 'time');
}

function updateFavoriteToggleUI() {
const icon = favoriteToggleBtn.querySelector('i');
favoriteToggleBtn.classList.toggle('active', showingFavs);
if (icon) {
icon.classList.toggle('fa-solid', showingFavs);
icon.classList.toggle('fa-regular', !showingFavs);
}
}

function updateActiveDayTabsUI() {
document.querySelectorAll('.day-filter-button').forEach(btn => {
const dayFilterForButton = btn.dataset.dayfilter;
btn.classList.toggle('active', activeDays.includes(dayFilterForButton));
});
}

function updateLiveStatusOnCards() {
const now = new Date().getTime();
const cards = document.querySelectorAll('.artist-card');

cards.forEach(card => {
const start = parseInt(card.dataset.timestampStart, 10);
const end = parseInt(card.dataset.timestampEnd, 10);
const indicator = card.querySelector('.now-playing-indicator');
const timeInfoEl = card.querySelector('.time-info');

if (!indicator || !timeInfoEl || !start || !end) return;

if (start <= now && end > now) {
const remainingMinutes = Math.ceil((end - now) / 60000);
timeInfoEl.innerHTML = `<strong>Tijd:</strong> ${card.dataset.tijdInfo} (nog ${remainingMinutes} min)`;
indicator.style.display = 'inline-block';
} else {
timeInfoEl.innerHTML = `<strong>Tijd:</strong> ${card.dataset.tijdInfo}${timeInfoEl.dataset.durationText}`;
indicator.style.display = 'none';
}
});
}


function toggleFavoriteOnCard(name){
const idx = favorites.indexOf(name);
if(idx > -1) favorites.splice(idx,1);
else favorites.push(name);
setStoredJSON(PREFIX + 'favorites', favorites);
applyFiltersAndSort({ preserveScroll: true });
}

function clearLocalStorageData(){
if(!confirm('Weet je zeker dat je alle data (behalve favorieten en voorkeuren) wilt resetten? Dit kan nodig zijn na website updates.'))
return;
for(const key of Object.keys(localStorage)){
if(key.startsWith(PREFIX + 'artist_info_') || key === ALL_ARTISTS_DATA_CACHE_KEY || key === ALL_ARTISTS_DATA_TIMESTAMP_KEY){
localStorage.removeItem(key);
}
}
allArtistsData = [];
location.reload();
}

async function runProxyTest() {
const proxies = {
'Codetabs (primary)': CORS_PROXY_PRIMARY,
'corsproxy.io (fallback)': CORS_PROXY_FALLBACK
};
let results = [];
alert('CORS proxy test gestart. Dit kan even duren...');
for (const [name, url] of Object.entries(proxies)) {
const startTime = performance.now();
try {
const res = await fetch(url + BASE_URL, { signal: AbortSignal.timeout(10000) });
const duration = performance.now() - startTime;
if (res.ok) {
results.push(`${name}: OK (${Math.round(duration)}ms)`);
} else {
results.push(`${name}: FAIL (Status: ${res.status})`);
}
} catch (err) {
results.push(`${name}: FAIL (Error: ${err.name})`);
}
}
alert('CORS Proxy Test Resultaten:\n\n' + results.join('\n'));
}


function updateBodyPadding() {
if (controlBarGroup) {
const headerHeight = controlBarGroup.offsetHeight;
document.body.style.paddingTop = `${headerHeight + 10}px`;
}
}

function syncPodiaButtonWidths() {
requestAnimationFrame(() => {
const toggleWidth = podiaToggleBtn.offsetWidth;
const podiaButtons = podiaButtonsContainer.querySelectorAll('.filter-button');
podiaButtons.forEach(btn => {
btn.style.width = `${toggleWidth}px`;
});
});
}

function handleScrollLogic() {
if (!controlBarGroup) return;
const currentScrollY = window.scrollY;
const scrollDelta = currentScrollY - lastScrollY;
const scrollThreshold = 5;
if (currentScrollY < controlBarGroup.offsetHeight) {
controlBarGroup.classList.remove('hidden');
}
else if (scrollDelta > scrollThreshold) {
controlBarGroup.classList.add('hidden');
podiaButtonsContainer.classList.remove('visible');
podiaToggleBtn.classList.remove('menu-open');
}
else if (scrollDelta < -scrollThreshold) {
controlBarGroup.classList.remove('hidden');
}
lastScrollY = currentScrollY <= 0 ? 0 : currentScrollY;
ticking = false;
}

function highlightCurrentDayButton() {
const now = new Date();
if (now.getFullYear() === 2025 && now.getMonth() === 6) {
const currentDayOfMonth = now.getDate();
const targetDayFilter = `${currentDayOfMonth} juli`;
const todayButton = document.querySelector(`.day-filter-button[data-dayfilter="${targetDayFilter}"]`);
if (todayButton) {
todayButton.classList.add('is-today');
}
}
}

function runCacheMigration() {
const MIGRATION_KEY = 'vf_cache_migration_fix_voerweg_v1';
if (localStorage.getItem(MIGRATION_KEY)) {
return;
}

console.log('Cache migratie voor "Club Voerweg" wordt uitgevoerd...');
let migrationNeeded = false;

const cachedDataString = localStorage.getItem(ALL_ARTISTS_DATA_CACHE_KEY);
if (cachedDataString) {
try {
const cachedData = JSON.parse(cachedDataString);
cachedData.forEach(item => {
if (item && item.info && item.info.podium === 'Club voerweg') {
migrationNeeded = true;
const artistName = item.artist.name;
const artistCacheKey = PREFIX + 'artist_info_' + artistName.replace(/[^a-zA-Z0-9]/g, '_') + '_v2';
localStorage.removeItem(artistCacheKey);
console.log(`Individuele cache voor ${artistName} verwijderd.`);
}
});
} catch(e) {
console.error("Fout bij parsen van hoofdcache tijdens migratie, cache wordt volledig gewist.", e);
migrationNeeded = true;
}
}

if (migrationNeeded) {
localStorage.removeItem(ALL_ARTISTS_DATA_CACHE_KEY);
localStorage.removeItem(ALL_ARTISTS_DATA_TIMESTAMP_KEY);
console.log('Hoofdcache en timestamp verwijderd. Data wordt opnieuw opgehaald.');
}

localStorage.setItem(MIGRATION_KEY, 'true');
console.log('Cache migratie voltooid.');
}


function initializeEventListeners() {
dayFilterContainerElement.addEventListener('click', function(e) {
const dayButton = e.target.closest('.day-filter-button');
if (dayButton) {
const dayFilter = dayButton.dataset.dayfilter;
const isAlreadyActive = activeDays.includes(dayFilter);

if (dayFilterMode === 'tabs') {
if (isAlreadyActive) {
activeDays = []; // Deselect if the same tab is clicked again
} else {
activeDays = [dayFilter]; // Set as the only active day
}
} else { // 'filter' mode
if (isAlreadyActive) {
activeDays = activeDays.filter(d => d !== dayFilter);
} else {
activeDays.push(dayFilter);
}
}
setStoredJSON(PREFIX + 'activeDays', activeDays);
updateActiveDayTabsUI();
applyFiltersAndSort();
}
});

podiaToggleBtn.addEventListener('click', (e) => {
e.stopPropagation();
podiaButtonsContainer.classList.toggle('visible');
podiaToggleBtn.classList.toggle('menu-open');
});

podiaButtonsContainer.addEventListener('click', function(e){
const btn = e.target.closest('.filter-button');
if(btn){
const p = btn.dataset.podium;
activePodia = activePodia.includes(p)
? activePodia.filter(x=>x!==p)
: [...activePodia, p];
setStoredJSON(PREFIX + 'activePodia', activePodia);
updateFilterButtonsUI();
updatePodiaToggleUI();
applyFiltersAndSort();
}
});

if (nowNextBtn) {
nowNextBtn.addEventListener('click', function() {
showingNowNext = !showingNowNext;
this.classList.toggle('active', showingNowNext);
applyFiltersAndSort();
});
}

window.addEventListener('click', (e) => {
if (!podiaToggleBtn.contains(e.target) && !podiaButtonsContainer.contains(e.target)) {
podiaButtonsContainer.classList.remove('visible');
podiaToggleBtn.classList.remove('menu-open');
}
if (settingsModal.classList.contains('visible') && !settingsModal.contains(e.target) && !settingsBtn.contains(e.target)) {
closeSettingsModal();
}
});


searchFieldElement.addEventListener('focus', function() {
searchClickShouldClear = (this.value.length > 0);
});

searchFieldElement.addEventListener('click', function() {
if (searchClickShouldClear && this.value.length > 0) {
this.value = '';
this.classList.remove('has-content');
this.blur();
applyFiltersAndSort();
searchClickShouldClear = false;
}
});

searchFieldElement.addEventListener('input', function(){
searchClickShouldClear = (this.value.length > 0);
this.classList.toggle('has-content', this.value.length > 0);
const v = this.value.toLowerCase();
if (v === 'proxytest' || v === 'corstest') {
this.value = ''; this.classList.remove('has-content'); searchClickShouldClear = false; this.blur();
runProxyTest(); return;
}
applyFiltersAndSort();
});

searchFieldElement.addEventListener('blur', function() {
searchClickShouldClear = false;
});

searchFieldElement.addEventListener('keydown', function(e) {
if (e.key === 'Enter' || e.keyCode === 13) {
this.blur(); e.preventDefault();
}
});

sortAlphaElement.addEventListener('click', function(){
sortMode = 'alpha'; setStoredString('sortMode', sortMode);
updateSortIconsUI();
applyFiltersAndSort();
});
sortTimeElement.addEventListener('click', function(){
sortMode = 'time'; setStoredString('sortMode', sortMode);
updateSortIconsUI();
applyFiltersAndSort();
});

favoriteToggleBtn.addEventListener('click', function(){
showingFavs = !showingFavs; setStoredJSON(PREFIX + 'showingFavs', showingFavs);
updateFavoriteToggleUI();
applyFiltersAndSort();
});

artistListElement.addEventListener('click', e=>{
const favIcon = e.target.closest('.favorite-icon');
if(favIcon) toggleFavoriteOnCard(favIcon.dataset.name);

const spotifyButton = e.target.closest('.spotify-play-button');
if (spotifyButton) {
const spotifyUri = spotifyButton.dataset.spotifyUri;
if (spotifyUri) {
dockedSpotifyPlayerContainer.innerHTML = '';
const iframe = document.createElement('iframe');
iframe.id = 'docked-spotify-iframe';
iframe.allow = 'autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture';
iframe.loading = 'lazy';
iframe.src = `https://open.spotify.com/embed/?uri=${encodeURIComponent(spotifyUri)}&utm_source=generator&theme=0&autoplay=1`;
dockedSpotifyPlayerContainer.appendChild(iframe);
dockedSpotifyPlayerWrapper.classList.add('visible');
}
}
});

closeDockedPlayerButton.addEventListener('click', () => {
dockedSpotifyPlayerWrapper.classList.remove('visible');
setTimeout(() => { dockedSpotifyPlayerContainer.innerHTML = ''; }, 300);
});

// Settings Modal Listeners
settingsBtn.addEventListener('click', openSettingsModal);
closeModalBtn.addEventListener('click', closeSettingsModal);
settingsModalOverlay.addEventListener('click', closeSettingsModal);
clearCacheBtn.addEventListener('click', clearLocalStorageData);

document.querySelectorAll('input[name="dayFilterMode"]').forEach(radio => {
radio.addEventListener('change', function() {
dayFilterMode = this.value;
setStoredString('dayFilterMode', dayFilterMode);
if (dayFilterMode === 'tabs' && activeDays.length > 1) {
activeDays = [activeDays[0]]; // Keep only the first active day
setStoredJSON(PREFIX + 'activeDays', activeDays);
updateActiveDayTabsUI();
}
applyFiltersAndSort();
});
});
document.querySelectorAll('input[name="nowNextMode"]').forEach(radio => {
radio.addEventListener('change', function() {
nowNextMode = this.value;
setStoredString('nowNextMode', nowNextMode);
if (showingNowNext) {
applyFiltersAndSort();
}
});
});


window.addEventListener('scroll', () => {
if (!ticking) { window.requestAnimationFrame(handleScrollLogic); ticking = true; }
});
window.addEventListener('resize', () => {
updateBodyPadding();
syncPodiaButtonWidths();
});
}

function openSettingsModal() {
document.body.classList.add('modal-open');
settingsModal.classList.add('visible');
settingsModalOverlay.classList.add('visible');
}
function closeSettingsModal() {
document.body.classList.remove('modal-open');
settingsModal.classList.remove('visible');
settingsModalOverlay.classList.remove('visible');
}
function loadSettings() {
document.querySelector(`input[name="dayFilterMode"][value="${dayFilterMode}"]`).checked = true;
document.querySelector(`input[name="nowNextMode"][value="${nowNextMode}"]`).checked = true;

if (dayFilterMode === 'tabs' && activeDays.length > 1) {
activeDays = [activeDays[0]];
setStoredJSON(PREFIX + 'activeDays', activeDays);
}
}

async function main() {
runCacheMigration();
loadSettings();
initializeEventListeners();
highlightCurrentDayButton();
updateFilterButtonsUI();
updatePodiaToggleUI();
updateSortIconsUI();
updateFavoriteToggleUI();
updateActiveDayTabsUI();

await loadAllArtistsData();

if (allArtistsData.length > 0) {
const sinemArtistData = allArtistsData.find(d => d.artist.name === 'Sinem');
if (sinemArtistData && sinemArtistData.info && !sinemArtistData.info.spotifyUri) {
sinemArtistData.info.spotifyUri = 'spotify:artist:44F4eMW1zuDkuHXnGzcCNx';
console.log("Patched in-memory data for Sinem with fallback Spotify URI.");
}
}

if (allArtistsData.length > 0) {
renderAllArtistCardsOnce();
if (typeof setupImageLazyLoader === 'function') {
setupImageLazyLoader();
}
applyFiltersAndSort();
updateLiveStatusOnCards();
clearInterval(liveStatusInterval);
liveStatusInterval = setInterval(updateLiveStatusOnCards, 60000);
} else {
if (!errorMessageElement.style.display || errorMessageElement.style.display === 'none') {
showError('Geen artiesten data gevonden of kunnen laden.');
}
updateArtistCount(0);
}
searchFieldElement.classList.toggle('has-content', searchFieldElement.value.length > 0);
updateBodyPadding();
syncPodiaButtonWidths();
handleScrollLogic();
}

main();
})();
</script>

</body>
</html>
